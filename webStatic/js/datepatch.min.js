(function(){"use strict";Date.UNIT_YEAR="year",Date.UNIT_MONTH="month",Date.UNIT_WEEK="week",Date.UNIT_DATE="date",Date.UNIT_HOUR="hour",Date.UNIT_MINUTE="minute",Date.UNIT_SECOND="second",Date.LOCALE_DAYS_ABBR=["日","月","火","水","木","金","土"],Date.LOCALE_DAYS_FULL=["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],Date.LOCALE_MONTHS_ABBR=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],Date.LOCALE_MONTHS_FULL=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],Date.isInteger=function(e){return"number"==typeof e&&e%1==0},Date.prototype.getDateOfYear=function(){var e=new Date;e.setMonth(0),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);var t=(this.getTime()-e.getTime())/864e5;return t-t%1},Date.prototype.getWeekOfYear=function(){var e=new Date;return e.setMonth(0),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),Math.floor(this.getDateOfYear()/7+(e.getDay()<this.getDay()?0:1))},Date.prototype.diff=function(e,t){var a={};if(a[Date.UNIT_WEEK]=6048e5,a[Date.UNIT_DATE]=864e5,a[Date.UNIT_HOUR]=36e5,a[Date.UNIT_MINUTE]=6e4,a[Date.UNIT_SECOND]=1e3,e instanceof Date&&a[t])return Math.floor((e.getTime()-this.getTime())/a[t]);throw new Error("One of the parameter is illegal.")},Date.prototype.add=function(e,t,a){if(!(Date.isInteger(e)&&[Date.UNIT_YEAR,Date.UNIT_MONTH,Date.UNIT_WEEK,Date.UNIT_DATE,Date.UNIT_HOUR,Date.UNIT_MINUTE,Date.UNIT_SECOND].indexOf(t)>-1))throw new Error("One of the parameter is invalid.");var r,s;switch(t){case Date.UNIT_YEAR:s=function(e,t){t.setFullYear(a?t.getFullYear()-e:t.getFullYear()+e)};break;case Date.UNIT_MONTH:s=function(e,t){t.setMonth(a?t.getMonth()-e:t.getMonth()+e)};break;case Date.UNIT_WEEK:r=function(e){return 7*e*86400*1e3};break;case Date.UNIT_DATE:r=function(e){return 86400*e*1e3};break;case Date.UNIT_HOUR:r=function(e){return 3600*e*1e3};break;case Date.UNIT_MINUTE:r=function(e){return 60*e*1e3};break;case Date.UNIT_SECOND:r=function(e){return 1e3*e}}r?this.setTime(a?this.getTime()-r(e):this.getTime()+r(e)):s&&s(e,this)},Date.prototype.format=function(e){if(e){var t=[["%Y",String(this.getFullYear())],["%y",String(this.getFullYear()).substring(2,4)],["%m",String(this.getMonth()+101).substring(1,3)],["%d",String(this.getDate()+100).substring(1,3)],["%H",String(this.getHours()+100).substring(1,3)],["%h",String(this.getHours())],["%I",String(this.getHours()%12+100).substring(1,3)],["%i",String(this.getHours()%12)],["%M",String(this.getMinutes()+100).substring(1,3)],["%S",String(this.getSeconds()+100).substring(1,3)],["%p",this.getHours()<12?"AM":"PM"],["%w",String(this.getDay())],["%U",String(this.getWeekOfYear())],["%a",Date.LOCALE_DAYS_ABBR[this.getDay()]],["%A",Date.LOCALE_DAYS_FULL[this.getDay()]],["%b",Date.LOCALE_MONTHS_ABBR[this.getMonth()]],["%B",Date.LOCALE_MONTHS_FULL[this.getMonth()]],["%%","%"]],a=String(e);return t.map(function(e,t,r){a=a.replace(e[0],e[1])}),a}if(!window.console||!window.console.error)throw new Error("Parameter 'template' must be set.");window.console.error(["The parameter 'template' accepts directives below:","%Y: full year. ex.) 2015","%y: lower 2 digits of year. ex.) 15","%m: zero supressed month. ex.) 02","%d: zero supressed date of the month. ex.) 05","%H: zero supressed hour of the day. ex.)05","%h: hour. ex.) 5","%I: zero supressed hour (12-hour clock). ex.) 05","%i: hour (12-hour clock). ex.) 5","%M: zero supressed minute. ex.) 09","%S: zero supressed second. ex.) 08","%p: 'AM' or 'PM'","%w: weekday as a decimal number. ex.) 6","%U: zero supressed week of the year. ex.) 00","%a: locale's abbreviated weekday name defined as 'Date.LOCALE_DAYS_ABBR'.","%A: locale's full weekday name defined as 'Date.LOCALE_DAYS_FULL'.","%b: locale's abbreviated month name defined as 'Date.LOCALE_MONTHS_ABBR'.","%B: locale's full month name defined as 'Date.LOCALE_MONTHS_FULL.","%%: escaped '%'.","ex.) '%Y/%m/%d %H:%M:%S' -> '2015/10/15 22:04:23'"].join("\n  "))},Date.parseISO=function(e){var t,a,r,s,n,i;if(t=new Date,t.setTime(0),t.setHours(0),a=e.split("T"),2==a.length?(r=a[0],s=a[1]):i=!0,!i&&r&&function(){var e,a,s,n,o={yyyymmdd:[/^([0-9]{4})([0-9]{2})([0-9]{2})$/,["yyyy","mm","dd"]],"yyyy/mm/dd":[/^([0-9]{4})\-([0-9]{2})\-([0-9]{2})$/,["yyyy","mm","dd"]],"yyyy-mm":[/^([0-9]{4})\-([0-9]{2})$/,["yyyy","mm"]],yyyy:[/^([0-9]{4})$/,["yyyy"]],"yyyy-ddd":[/^([0-9]{4})\-([0-9]{3})$/,["yyyy","ddd"]],yyyyWwwd:[/^([0-9]{4})W([0-9]{2})([1-7])$/,["yyyy","ww","d"]],"yyyy-Www-d":[/^([0-9]{4})\-W([0-9]{2})\-([1-7])$/,["yyyy","ww","d"]]};for(e in i=!0,o)if(s=r.match(o[e][0]),s){for(i=!1,s.shift(),a=0;a<s.length&&!i;a++){try{n=Number(s[a])}catch(e){i=!0;break}switch(o[e][1][a]){case"yyyy":t.setFullYear(n);break;case"mm":n>-1&&n<13?t.setMonth(n-1):i=!0;break;case"dd":n>0&&n<32?t.setDate(n):i=!0;break;case"ddd":n>0&&n<367?t.setHours(24*n):i=!0;break;case"ww":n>0&&n<52?(t.getDay()<4&&(n-=1),t.setHours(7*(n-1)*24)):i=!0;break;case"d":if(n>0&&n<8){for(;0!=t.getDay();)t.add(1,Date.UNIT_DATE,!0);t.add(n,Date.UNIT_DATE)}else i=!0;break;default:i=!0}}break}}(),s&&(n=s.split(/Z|\+|\-/),n.length<=2?s=n[0]:i=!0),!i&&s&&function(){var e,a,r,n={"hh:mm:ss":[/^([0-9]{2}):([0-9]{2}):([0-9]{2}([.,][0-9]+)?)$/,["HH","MM","SS","__"]],"hh:mm":[/^([0-9]{2}):([0-9]{2}([.,][0-9]+)?)$/,["HH","MM","__"]],hh:[/^([0-9]{2}([.,][0-9]+)?)$/,["HH","__"]],hhmmss:[/^([0-9]{2})([0-9]{2})([0-9]{2})$/,["HH","MM","SS"]],hhmm:[/^([0-9]{2})([0-9]{2})$/,["HH","MM"]]};for(e in i=!0,n)if(r=s.match(n[e][0]),r){var o,h;for(r.shift(),i=!1,a=0;a<r.length&&!i;a++){try{if(!r[a]){o=null;continue}o=Number(r[a].replace(",","."))}catch(e){i=!0;break}switch(n[e][1][a]){case"HH":o>-1&&o<25?(Date.isInteger(o)||(h=o-Math.floor(o),o=Math.floor(o)),t.add(o,Date.UNIT_HOUR),h&&t.setTime(t.getTime()+3600*h*1e3)):i=!0;break;case"MM":o>-1&&o<61?(Date.isInteger(o)||(h=o-Math.floor(o),o=Math.floor(o)),t.add(o,Date.UNIT_MINUTE),h&&t.setTime(t.getTime()+60*h*1e3)):i=!0;break;case"SS":o>-1&&o<61?(Date.isInteger(o)||(h=o-Math.floor(o),o=Math.floor(o)),t.add(o,Date.UNIT_SECOND),h&&t.setTime(t.getTime()+1e3*h)):i=!0;break;case"__":break;default:i=!0}}break}}(),i)throw new Error("Illegal form.");return t}}).call(this);